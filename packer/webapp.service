[Unit]
Description=WebApp
After=network.target

[Service]
WorkingDirectory=/home/ec2-user/webapp
Environment=NODE_PORT=3000
Type=simple
ExecStartPre=sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c file:/home/ec2-user/webapp/cloudwatch-config.json -s
ExecStart=/usr/bin/node /home/ec2-user/webapp/app.js
Restart=always
User=ec2-user
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=WebApp

[Install]
WantedBy=multi-user.target
